;(function(a){a.fn.infiniteScroll=function(){var b=a(this),c=a(window),d=a("body"),e="init",f=!1,g=!0,h={threshold:80,loadMore:function(){},onEnd:null,iScroll:null};arguments.length&&(typeof arguments[0]=="string"?(e=arguments[0],arguments.length>1&&typeof arguments[1]=="object"&&(h=a.extend(h,arguments[1]))):typeof arguments[0]=="object"&&(h=a.extend(h,arguments[0])));if(e==="init"){var i=function(){if(f||!g)return;var a=h.iScroll?-h.iScroll.maxScrollY+h.iScroll.y:d.outerHeight()-c.height()-c.scrollTop();a<h.threshold&&(f=!0,h.loadMore(function(a){a===!1&&(g=!1,typeof h.onEnd=="function"&&h.onEnd()),f=!1}))};if(h.iScroll){var j=h.iScroll.options.onScrollMove||null;h.iScroll.options.onScrollMove=function(){j&&j(),i()},h.iScroll_scrollMove=j}else c.on("scroll.infinite resize.infinite",i);b.data("infinite-scroll",h),a(i)}if(e==="reset"){var h=b.data("infinite-scroll");h.iScroll&&(h.iScroll_scrollMove&&(h.iScroll.options.onScrollMove=h.iScroll_scrollMove),h.iScroll.scrollTo(0,0,0,!1)),c.off("scroll.infinite resize.infinite"),b.infiniteScroll(h)}return this}})(jQuery);